<html>

<head>
    <meta charset="utf-8">
    <title>PdbeAutocompleteSearch</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="../src/favicon.ico">
    <link href="../build/styles.bundle.css" rel="stylesheet">
    

    <!-- Complied & minified library css -->
    <link rel="stylesheet" href="//www.ebi.ac.uk/pdbe/pdb-component-library/v1.0/css/pdb.component.library.min-1.0.0.css" />

    <!-- Dependencey scripts (these can be skipped if already included in page) -->
    <script src="//www.ebi.ac.uk/pdbe/pdb-component-library/libs/d3.min.js"></script>
    <script src="//www.ebi.ac.uk/pdbe/pdb-component-library/libs/angular.1.4.7.min.js"></script>

    <!-- Complied & minified library JS -->
    <script src="//www.ebi.ac.uk/pdbe/pdb-component-library/v1.0/js/pdb.component.library.min-1.0.0.js"></script>
    <script type="text/javascript" src="../build/inline.bundle.js"></script>
    <script type="text/javascript" src="../build/vendor.bundle.js"></script>
    <script type="text/javascript" src="../build/main.bundle.js"></script>

</head>

<body>
    <pdb-prints pdb-ids="['1cbs']" settings='{"size": 48 }'></pdb-prints>
    <pdb-autocomplete-search></pdb-autocomplete-search>

    <script>

    (function () {
    'use strict';
    angular.element(document).ready(function () {
        angular.bootstrap(document, ['pdb.component.library']);
    });
    }());

    //Autocomplete Config Object
    PdbeAutocompleteSearchConfig = {
      resultBoxAlign: 'left',
      redirectOnClick: false,
      searchUrl: '//www.ebi.ac.uk/pdbe/search/pdb-autocomplete/select',
      fields: 'value,num_pdb_entries,var_name',
      group: 'group=true&group.field=category',
      groupLimit: '25',
      sort: 'category+asc,num_pdb_entries+desc',
      searchParams: 'rows=20000&json.nl=map&wt=json'
    }

    //
    document.addEventListener('PDBe.autocomplete.click', function(e){ console.log(e.eventData) });

    // //Method to manually boostrap PDBe autocomplete

    // // Create the event.
    // var event = document.createEvent('MouseEvents');

    // // Define that the event name is 'build'.
    // event.initEvent('WebComponentsReady', true, true);

    // // target can be any Element or other EventTarget.
    // document.dispatchEvent(event);

    //Method to manually boostrap PDBe autocomplete by dispatching custom event 'PDBeWebComponentsReady'
    function boostarpPdbeAutocomplete(){

        var event;
        if (typeof MouseEvent == 'function') {
            event = new MouseEvent('PDBeWebComponentsReady', { 'view': window, 'bubbles': true, 'cancelable': true });
        } else if (typeof document.createEvent == 'function') {
            event = document.createEvent('MouseEvents');
            event.initEvent('PDBeWebComponentsReady', true /*bubbles*/, true /*cancelable*/);
        }
        //Dispatch
        document.dispatchEvent(event);
    }

    //Boostrap component
    boostarpPdbeAutocomplete();

    </script>
</body>

</html>